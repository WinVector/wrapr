---
title: "Dot Pipe"
author: "John Mount"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Dot Pipe}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

[`%.>%` dot arrow pipe](https://winvector.github.io/wrapr/reference/dot_arrow.html) is a strict pipe with intended semantics:


>  "`a %.>% b`" is to be treated
>  as if the user had written "`{ . <- a; b };`"
>  with "`%.>%`" being treated as left-associative.

That is: `%.>%` does not alter any function arguments that are not explicitly named.  `%.>%` is designed to be explicit and simple.

The effect looks is show below.

The following two expressions should be equivalent:

```{r pipe1s}
library("wrapr")

cos(exp(sin(4)))

4 %.>% sin(.) %.>% exp(.) %.>% cos(.)
```

The notation is quite powerful as it treats pipe stages as expression parameterized over the variable 
"`.`".  This means you do not need to introduce functions to express stages.  The following is 
a valid dot-pipe:

```{r pipe1}
1:4 %.>% .^2 
```

The notation is also very regular in that many variations of expression work as expected.  Example:

```{r pipe2}
5 %.>% sin(.)

5 %.>% base::sin(.)
```


Regularity can be a *big* advantage in teaching and comprehension. Please see ["In Praise of Syntactic Sugar"](http://www.win-vector.com/blog/2017/07/in-praise-of-syntactic-sugar/) for discussion.

The dot arrow pipe has S3/S4 dispatch (please see \url{https://journal.r-project.org/archive/2018/RJ-2018-042/index.html}).
However as the right-hand side of the pipe is normally held unevaluated, we don't know the type except in special
cases (such as the rigth-hand side being referred to by a name or variable).  To force the evaluation of a pipe term,
simply wrap it in .().

For more of the details on dot pipe please see [the package README](https://github.com/WinVector/wrapr) and the following [technical article](https://journal.r-project.org/archive/2018/RJ-2018-042/index.html).

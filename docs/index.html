<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wrap R Tools for Debugging and Parametric Programming • wrapr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Wrap R Tools for Debugging and Parametric Programming">
<meta property="og:description" content="Tools for writing and debugging R code. Provides: 
    %.&gt;% dot-pipe (an S3 configurable pipe), unpack/to (R style multiple assignment/return),
    build_frame()/draw_frame() (data.frame example tools),
    qc() (quoting concatenate), 
    := (named map builder), let() (converts non-standard evaluation interfaces to parametric standard
    evaluation interfaces, inspired by gtools::strmacro() and base::bquote()), and more.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">wrapr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/CornerCases.html">Corner Cases</a>
    </li>
    <li>
      <a href="articles/DebugFnW.html">Debug Vignette</a>
    </li>
    <li>
      <a href="articles/FrameTools.html">Frame Tools</a>
    </li>
    <li>
      <a href="articles/Named_Arguments.html">Named Arguments</a>
    </li>
    <li>
      <a href="articles/QuotingConcatinate.html">Quoting Concatinate</a>
    </li>
    <li>
      <a href="articles/SubstitutionModes.html">Substitution Modes</a>
    </li>
    <li>
      <a href="articles/bquote.html">bquote</a>
    </li>
    <li>
      <a href="articles/dot_pipe.html">Dot Pipe</a>
    </li>
    <li>
      <a href="articles/lambda.html">lambda Function Builder</a>
    </li>
    <li>
      <a href="articles/let.html">Let</a>
    </li>
    <li>
      <a href="articles/multi_assign.html">Multiple Assignment</a>
    </li>
    <li>
      <a href="articles/named_map_builder.html">Named Map Builder</a>
    </li>
    <li>
      <a href="articles/unpack_multiple_assignment.html">Multiple Assignment with unpack</a>
    </li>
    <li>
      <a href="articles/wrapr_Eager.html">wrapr Eager Evaluation</a>
    </li>
    <li>
      <a href="articles/wrapr_applicable.html">wrapr_applicable</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://win-vector.com">Sponsor: Win-Vector LLC</a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<!-- README.md is generated from README.Rmd. Please edit that file -->
<p><a href="https://winvector.github.io/wrapr/"><code>wrapr</code></a> is an <a href="https://cran.r-project.org"><code>R</code></a> package that supplies powerful tools for writing and debugging <code>R</code> code.</p>
<p><img src="https://github.com/WinVector/wrapr/raw/master/tools/wraprs.png"></p>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Primary <code>wrapr</code> services include:</p>
<ul>
<li>
<a href="https://winvector.github.io/wrapr/reference/dot_arrow.html"><code>%.&gt;%</code></a> (dot arrow pipe)</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/unpack.html"><code>unpack</code></a>/<a href="https://winvector.github.io/wrapr/reference/to.html"><code>to</code></a> (assign to multiple values)</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/as_named_list.html"><code>as_named_list</code></a> (build up a named list quickly)</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/build_frame.html"><code>build_frame()</code></a> / <a href="https://winvector.github.io/wrapr/reference/draw_frame.html"><code>draw_frame()</code></a> ( <code>data.frame</code> builders and formatters )</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/qc.html"><code>qc()</code></a> (quoting concatenate)</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/named_map_builder.html"><code>:=</code></a> (named map builder)</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/coalesce.html"><code>%?%</code></a> (coalesce)</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/reduceexpand.html"><code>%.|%</code></a> (reduce/expand args)</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/uniques.html"><code>uniques()</code></a> (safe <code><a href="https://rdrr.io/r/base/unique.html">unique()</a></code> replacement)</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/partition_tables.html"><code>partition_tables()</code></a> / <a href="https://winvector.github.io/wrapr/reference/execute_parallel.html"><code>execute_parallel()</code></a>
</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/DebugFnW.html"><code>DebugFnW()</code></a> (function debug wrappers)</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/defineLambda.html"><code>λ()</code></a> (anonymous function builder)</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/let.html"><code>let()</code></a> (let block)</li>
<li>
<a href="https://winvector.github.io/wrapr/articles/bquote.html"><code>evalb()</code>/<code>si()</code></a> (evaluate with <code>bquote</code> / string interpolation)</li>
<li>
<a href="https://winvector.github.io/wrapr/reference/sortv.html"><code>sortv()</code></a> (sort a data.frame by a set of columns).</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/WinVector/wrapr">wrapr</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"wrapr"</span><span class="op">)</span>
 <span class="co">#  [1] '2.0.2'</span>
<span class="fu"><a href="https://rdrr.io/r/base/date.html">date</a></span><span class="op">(</span><span class="op">)</span>
 <span class="co">#  [1] "Mon Aug 10 15:24:46 2020"</span></pre></div>
</div>
<div id="-dot-pipe-or-dot-arrow" class="section level2">
<h2 class="hasAnchor">
<a href="#-dot-pipe-or-dot-arrow" class="anchor"></a><a href="https://winvector.github.io/wrapr/articles/dot_pipe.html"><code>%.&gt;%</code> (dot pipe or dot arrow)</a>
</h2>
<p><code><a href="reference/dot_arrow.html">%.&gt;%</a></code> dot arrow pipe is a pipe with intended semantics:</p>
<blockquote>
<p>“<code>a %.&gt;% b</code>” is to be treated <em>approximately</em> as if the user had written “<code>{ . &lt;- a; b };</code>” with “<code><a href="reference/dot_arrow.html">%.&gt;%</a></code>” being treated as left-associative.</p>
</blockquote>
<p>Other <code>R</code> pipes include <a href="https://CRAN.R-project.org/package=magrittr"><code>magrittr</code></a> and <a href="https://CRAN.R-project.org/package=pipeR"><code>pipeR</code></a>.</p>
<p>The following two expressions should be equivalent:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/Trig.html">cos</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html">sin</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
 <span class="co">#  [1] 0.8919465</span>

<span class="fl">4</span> <span class="op">%.&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html">sin</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op">%.&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op">%.&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html">cos</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>
 <span class="co">#  [1] 0.8919465</span></pre></div>
<p>The notation is quite powerful as it treats pipe stages as expression parameterized over the variable “<code>.</code>”. This means you do not need to introduce functions to express stages. The following is a valid dot-pipe:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">%.&gt;%</span> <span class="va">.</span><span class="op">^</span><span class="fl">2</span> 
 <span class="co">#  [1]  1  4  9 16</span></pre></div>
<p>The notation is also very regular as we show below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">%.&gt;%</span> <span class="va">sin</span>
 <span class="co">#  [1]  0.8414710  0.9092974  0.1411200 -0.7568025</span>
<span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">%.&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html">sin</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>
 <span class="co">#  [1]  0.8414710  0.9092974  0.1411200 -0.7568025</span>
<span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">%.&gt;%</span> <span class="fu">base</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/base/Trig.html">sin</a></span>
 <span class="co">#  [1]  0.8414710  0.9092974  0.1411200 -0.7568025</span>
<span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">%.&gt;%</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html">sin</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>
 <span class="co">#  [1]  0.8414710  0.9092974  0.1411200 -0.7568025</span>

<span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">%.&gt;%</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span> <span class="op">}</span>
 <span class="co">#  [1] 2 3 4 5</span>
<span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">%.&gt;%</span> <span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span> <span class="op">}</span><span class="op">)</span>
 <span class="co">#  [1] 2 3 4 5</span>

<span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">%.&gt;%</span> <span class="op">{</span> <span class="va">.</span><span class="op">^</span><span class="fl">2</span> <span class="op">}</span> 
 <span class="co">#  [1]  1  4  9 16</span>
<span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">%.&gt;%</span> <span class="op">(</span> <span class="va">.</span><span class="op">^</span><span class="fl">2</span> <span class="op">)</span>
 <span class="co">#  [1]  1  4  9 16</span></pre></div>
<p>Regularity can be a <em>big</em> advantage in teaching and comprehension. Please see <a href="https://win-vector.com/2017/07/07/in-praise-of-syntactic-sugar/">“In Praise of Syntactic Sugar”</a> for more details. Some formal documentation can be found <a href="https://github.com/WinVector/wrapr/blob/master/extras/wrapr_pipe.pdf">here</a>.</p>
<ul>
<li>
<p>Some obvious “dot-free”" right-hand sides are rejected. Pipelines are meant to move values through a sequence of transforms, and not just for side-effects. Example: <code>5 %.&gt;% 6</code> deliberately stops as <code>6</code> is a right-hand side that obviously does not use its incoming value. This check is only applied to values, not functions on the right-hand side.</p>
</li>
<li>
<p>Trying to pipe into a an “zero argument function evaluation expression” such as <code><a href="https://rdrr.io/r/base/Trig.html">sin()</a></code> is prohibited as it looks too much like the user declaring <code><a href="https://rdrr.io/r/base/Trig.html">sin()</a></code> takes no arguments. One must pipe into either a function, function name, or an non-trivial expression (such as <code><a href="https://rdrr.io/r/base/Trig.html">sin(.)</a></code>). A useful error message is returned to the user: <code>wrapr::pipe does not allow direct piping into a no-argument function call expression (such as "sin()" please use sin(.))</code>.</p>
</li>
<li>
<p>Some reserved words can not be piped into. One example is <code>5 %.&gt;% return(.)</code> is prohibited as the obvious pipe implementation would not actually escape from user functions as users may intend.</p>
</li>
<li>
<p>Obvious de-references (such as <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code>, <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code>, <code><a href="https://rdrr.io/r/base/slotOp.html">@</a></code>, and a few more) on the right-hand side are treated performed (example: <code>5 %.&gt;% base::sin(.)</code>).</p>
</li>
<li>
<p>Outer parenthesis on the right-hand side are removed (example: <code>5 %.&gt;% (sin(.))</code>).</p>
</li>
<li>
<p>Anonymous function constructions are evaluated so the function can be applied (example: <code>5 %.&gt;% function(x) {x+1}</code> returns 6, just as <code>5 %.&gt;% (function(x) {x+1})(.)</code> does).</p>
</li>
<li>
<p>Checks and transforms are not performed on items inside braces (example: <code>5 %.&gt;% { function(x) {x+1} }</code> returns <code>function(x) {x+1}</code>, not 6).</p>
</li>
<li>
<p>The dot arrow pipe has S3/S4 dispatch (please see ). However as the right-hand side of the pipe is normally held unevaluated, we don’t know the type except in special cases (such as the rigth-hand side being referred to by a name or variable). To force the evaluation of a pipe term, simply wrap it in <code>.()</code>.</p>
</li>
</ul>
<p>The dot pipe is also user configurable through standard <code>S3</code>/<code>S4</code> methods.</p>
<p>The dot pipe has been <a href="https://journal.r-project.org/archive/2018/RJ-2018-042/index.html">formally written up in the R Journal</a>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="op">@</span>article{RJ<span class="dv">-2018-042</span>,</span>
<span id="cb5-2"><a href="#cb5-2"></a>  author =<span class="st"> </span>{John Mount and Nina Zumel},</span>
<span id="cb5-3"><a href="#cb5-3"></a>  title =<span class="st"> </span>{{Dot<span class="op">-</span>Pipe<span class="op">:</span><span class="st"> </span>an S3 Extensible Pipe <span class="cf">for</span> R}},</span>
<span id="cb5-4"><a href="#cb5-4"></a>  year =<span class="st"> </span>{<span class="dv">2018</span>},</span>
<span id="cb5-5"><a href="#cb5-5"></a>  journal =<span class="st"> </span>{{The R Journal}},</span>
<span id="cb5-6"><a href="#cb5-6"></a>  url =<span class="st"> </span>{https<span class="op">:</span><span class="er">//</span>journal.r<span class="op">-</span>project.org<span class="op">/</span>archive<span class="op">/</span><span class="dv">2018</span><span class="op">/</span>RJ<span class="dv">-2018-042</span><span class="op">/</span>index.html}</span>
<span id="cb5-7"><a href="#cb5-7"></a>}</span></code></pre></div>
</div>
<div id="unpackto-multiple-assignments" class="section level2">
<h2 class="hasAnchor">
<a href="#unpackto-multiple-assignments" class="anchor"></a><a href="https://winvector.github.io/wrapr/reference/unpack.html"><code>unpack</code></a>/<a href="https://winvector.github.io/wrapr/reference/to.html"><code>to</code></a> multiple assignments</h2>
<p>Unpack a named list into the current environment by name (for a positional based multiple assignment operator please see <a href="https://CRAN.R-project.org/package=zeallot"><code>zeallot</code></a>, for another named base multiple assigment please see <a href="https://github.com/crowding/vadr/blob/master/R/bind.R"><code>vadr::bind</code></a>).</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">9</span>,
  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'train'</span>, <span class="st">'calibrate'</span>, <span class="st">'test'</span><span class="op">)</span>,
  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">unpack</span><span class="op">[</span>
  train_data <span class="op">=</span> <span class="va">train</span>,
  calibrate_data <span class="op">=</span> <span class="va">calibrate</span>,
  test_data <span class="op">=</span> <span class="va">test</span>
  <span class="op">]</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html">split</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">d</span><span class="op">$</span><span class="va">group</span><span class="op">)</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">train_data</span><span class="op">)</span></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="right">x</th>
<th align="left">group</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td align="right">1</td>
<td align="left">train</td>
</tr>
<tr class="even">
<td>4</td>
<td align="right">4</td>
<td align="left">train</td>
</tr>
<tr class="odd">
<td>7</td>
<td align="right">7</td>
<td align="left">train</td>
</tr>
</tbody>
</table>
</div>
<div id="as_named_list" class="section level2">
<h2 class="hasAnchor">
<a href="#as_named_list" class="anchor"></a><a href="https://winvector.github.io/wrapr/reference/as_named_list.html"><code>as_named_list</code></a>
</h2>
<p>Build up named lists. <a href="https://win-vector.com/2020/01/21/using-unpack-to-manage-your-r-environment/">Very convenient for managing workspaces when used with used with <code>unpack</code>/<code>to</code>.</a></p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="fu"><a href="reference/as_named_list.html">as_named_list</a></span><span class="op">(</span><span class="va">train_data</span>, <span class="va">calibrate_data</span>, <span class="va">test_data</span><span class="op">)</span>
 <span class="co">#  $train_data</span>
 <span class="co">#    x group</span>
 <span class="co">#  1 1 train</span>
 <span class="co">#  4 4 train</span>
 <span class="co">#  7 7 train</span>
 <span class="co">#  </span>
 <span class="co">#  $calibrate_data</span>
 <span class="co">#    x     group</span>
 <span class="co">#  2 2 calibrate</span>
 <span class="co">#  5 5 calibrate</span>
 <span class="co">#  8 8 calibrate</span>
 <span class="co">#  </span>
 <span class="co">#  $test_data</span>
 <span class="co">#    x group</span>
 <span class="co">#  3 3  test</span>
 <span class="co">#  6 6  test</span>
 <span class="co">#  9 9  test</span></pre></div>
</div>
<div id="build_frame--draw_frame" class="section level2">
<h2 class="hasAnchor">
<a href="#build_frame--draw_frame" class="anchor"></a><a href="https://winvector.github.io/wrapr/reference/build_frame.html"><code>build_frame()</code></a> / <a href="https://winvector.github.io/wrapr/reference/draw_frame.html"><code>draw_frame()</code></a>
</h2>
<p><a href="https://winvector.github.io/wrapr/reference/build_frame.html"><code>build_frame()</code></a> is a convenient way to type in a small example <code>data.frame</code> in natural row order. This can be very legible and saves having to perform a transpose in one’s head. <a href="https://winvector.github.io/wrapr/reference/draw_frame.html"><code>draw_frame()</code></a> is the complimentary function that formats a given <code>data.frame</code> (and is a great way to produce neatened examples).</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/build_frame.html">build_frame</a></span><span class="op">(</span>
   <span class="st">"measure"</span>                   , <span class="st">"training"</span>, <span class="st">"validation"</span> <span class="op">|</span>
   <span class="st">"minus binary cross entropy"</span>, <span class="fl">5</span>         , <span class="op">-</span><span class="fl">7</span>           <span class="op">|</span>
   <span class="st">"accuracy"</span>                  , <span class="fl">0.8</span>       , <span class="fl">0.6</span>          <span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
 <span class="co">#                       measure training validation</span>
 <span class="co">#  1 minus binary cross entropy      5.0       -7.0</span>
 <span class="co">#  2                   accuracy      0.8        0.6</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
 <span class="co">#  'data.frame':   2 obs. of  3 variables:</span>
 <span class="co">#   $ measure   : chr  "minus binary cross entropy" "accuracy"</span>
 <span class="co">#   $ training  : num  5 0.8</span>
 <span class="co">#   $ validation: num  -7 0.6</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="reference/draw_frame.html">draw_frame</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>
 <span class="co">#  x &lt;- wrapr::build_frame(</span>
 <span class="co">#     "measure"                     , "training", "validation" |</span>
 <span class="co">#       "minus binary cross entropy", 5         , -7           |</span>
 <span class="co">#       "accuracy"                  , 0.8       , 0.6          )</span></pre></div>
</div>
<div id="qc-quoting-concatenate" class="section level2">
<h2 class="hasAnchor">
<a href="#qc-quoting-concatenate" class="anchor"></a><a href="https://winvector.github.io/wrapr/reference/qc.html"><code>qc()</code> (quoting concatenate)</a>
</h2>
<p><code><a href="reference/qc.html">qc()</a></code> is a quoting variation on <code>R</code>’s concatenate operator <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>. This code such as the following:</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="fu"><a href="reference/qc.html">qc</a></span><span class="op">(</span>a <span class="op">=</span> <span class="va">x</span>, b <span class="op">=</span> <span class="va">y</span><span class="op">)</span>
 <span class="co">#    a   b </span>
 <span class="co">#  "x" "y"</span>

<span class="fu"><a href="reference/qc.html">qc</a></span><span class="op">(</span><span class="va">one</span>, <span class="va">two</span>, <span class="va">three</span><span class="op">)</span>
 <span class="co">#  [1] "one"   "two"   "three"</span></pre></div>
<p><code><a href="reference/qc.html">qc()</a></code> also allows <code><a href="https://rdrr.io/r/base/bquote.html">bquote()</a></code> driven <code>.()</code>-style argument escaping.</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="va">aname</span> <span class="op">&lt;-</span> <span class="st">"I_am_a"</span>
<span class="va">yvalue</span> <span class="op">&lt;-</span> <span class="st">"six"</span>

<span class="fu"><a href="reference/qc.html">qc</a></span><span class="op">(</span><span class="fu">.</span><span class="op">(</span><span class="va">aname</span><span class="op">)</span> <span class="op">:=</span> <span class="va">x</span>, b <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">yvalue</span><span class="op">)</span><span class="op">)</span>
 <span class="co">#  I_am_a      b </span>
 <span class="co">#     "x"  "six"</span></pre></div>
<p>Notice the <code>:=</code> notation is required for syntacitic reasons.</p>
</div>
<div id="-named-map-builder" class="section level2">
<h2 class="hasAnchor">
<a href="#-named-map-builder" class="anchor"></a><a href="https://winvector.github.io/seplyr/articles/named_map_builder.html"><code>:=</code> (named map builder)</a>
</h2>
<p><code>:=</code> is the “named map builder”. It allows code such as the following:</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="st">'a'</span> <span class="op">:=</span> <span class="st">'x'</span>
 <span class="co">#    a </span>
 <span class="co">#  "x"</span></pre></div>
<p>The important property of named map builder is it accepts values on the left-hand side allowing the following:</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="va">name</span> <span class="op">&lt;-</span> <span class="st">'variableNameFromElsewhere'</span>
<span class="va">name</span> <span class="op">:=</span> <span class="st">'newBinding'</span>
 <span class="co">#  variableNameFromElsewhere </span>
 <span class="co">#               "newBinding"</span></pre></div>
<p>A nice property is <code>:=</code> commutes (in the sense of algebra or category theory) with <code>R</code>’s concatenation function <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>. That is the following two statements are equivalent:</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span><span class="op">)</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'x'</span>, <span class="st">'y'</span><span class="op">)</span>
 <span class="co">#    a   b </span>
 <span class="co">#  "x" "y"</span>

<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'a'</span> <span class="op">:=</span> <span class="st">'x'</span>, <span class="st">'b'</span> <span class="op">:=</span> <span class="st">'y'</span><span class="op">)</span>
 <span class="co">#    a   b </span>
 <span class="co">#  "x" "y"</span></pre></div>
<p>The named map builder is <a href="https://winvector.github.io/seplyr/articles/named_map_builder.html">designed to synergize with <code>seplyr</code></a>.</p>
</div>
<div id="-coalesce" class="section level2">
<h2 class="hasAnchor">
<a href="#-coalesce" class="anchor"></a><a href="https://winvector.github.io/wrapr/reference/coalesce.html"><code>%?%</code> (coalesce)</a>
</h2>
<p>The coalesce operator tries to replace elements of its first argument with elements from its second argument. In particular <code><a href="reference/coalesce.html">%?%</a></code> replaces NULL vectors and NULL/NA entries of vectors and lists.</p>
<p>Example:</p>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span><span class="op">)</span> <span class="op">%?%</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">20</span><span class="op">)</span>
 <span class="co">#  [1]  1 20</span></pre></div>
</div>
<div id="-reduceexpand-args" class="section level2">
<h2 class="hasAnchor">
<a href="#-reduceexpand-args" class="anchor"></a><a href="https://winvector.github.io/wrapr/reference/reduceexpand.html"><code>%.|%</code> (reduce/expand args)</a>
</h2>
<p><code>x %.|% f</code> stands for <code>f(x[[1]], x[[2]], ..., x[[length(x)]])</code>. <code>v %|.% x</code> also stands for <code>f(x[[1]], x[[2]], ..., x[[length(x)]])</code>. The two operators are the same, the variation just allowing the user to choose the order they write things. The mnemonic is: “data goes on the dot-side of the operator.”</p>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="va">args</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">'prefix_'</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>, <span class="st">'_suffix'</span><span class="op">)</span>

<span class="va">args</span> <span class="op">%.|%</span> <span class="va">paste0</span>
 <span class="co">#  [1] "prefix_1_suffix" "prefix_2_suffix" "prefix_3_suffix"</span>
<span class="co"># prefix_1_suffix" "prefix_2_suffix" "prefix_3_suffix"</span>

<span class="va">paste0</span> <span class="op">%|.%</span> <span class="va">args</span>
 <span class="co">#  [1] "prefix_1_suffix" "prefix_2_suffix" "prefix_3_suffix"</span>
<span class="co"># prefix_1_suffix" "prefix_2_suffix" "prefix_3_suffix"</span></pre></div>
</div>
<div id="debugfnw" class="section level2">
<h2 class="hasAnchor">
<a href="#debugfnw" class="anchor"></a><a href="https://winvector.github.io/wrapr/articles/DebugFnW.html"><code>DebugFnW()</code></a>
</h2>
<p><code><a href="reference/DebugFnW.html">DebugFnW()</a></code> wraps a function for debugging. If the function throws an exception the execution context (function arguments, function name, and more) is captured and stored for the user. The function call can then be reconstituted, inspected and even re-run with a step-debugger. Please see our <a href="https://youtu.be/-P9UzQuJSH8?list=PLAKBwakacHbQT51nPHex1on3YNCCmggZA">free debugging video series</a> and <code><a href="articles/DebugFnW.html">vignette('DebugFnW', package='wrapr')</a></code> for examples.</p>
</div>
<div id="λ-anonymous-function-builder" class="section level2">
<h2 class="hasAnchor">
<a href="#%CE%BB-anonymous-function-builder" class="anchor"></a><a href="https://winvector.github.io/wrapr/articles/lambda.html"><code>λ()</code> (anonymous function builder)</a>
</h2>
<p><code>λ()</code> is a concise abstract function creator or “<a href="https://en.wikipedia.org/wiki/Lambda_calculus">lambda abstraction</a>”. It is a placeholder that allows the use of the -character for very concise function abstraction.</p>
<p>Example:</p>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="co"># Make sure lambda function builder is in our enironment.</span>
<span class="fu">wrapr</span><span class="fu">::</span><span class="fu"><a href="reference/defineLambda.html">defineLambda</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># square numbers 1 through 4</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fu">λ</span><span class="op">(</span><span class="va">x</span>, <span class="va">x</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>
 <span class="co">#  [1]  1  4  9 16</span></pre></div>
</div>
<div id="let" class="section level2">
<h2 class="hasAnchor">
<a href="#let" class="anchor"></a><a href="https://winvector.github.io/wrapr/articles/let.html"><code>let()</code></a>
</h2>
<p><code><a href="reference/let.html">let()</a></code> allows execution of arbitrary code with substituted variable names (note this is subtly different than binding values for names as with <code><a href="https://rdrr.io/r/base/substitute.html">base::substitute()</a></code> or <code><a href="https://rdrr.io/r/base/with.html">base::with()</a></code>).</p>
<p>The function is simple and powerful. It treats strings as variable names and re-writes expressions as if you had used the denoted variables. For example the following block of code is equivalent to having written “a + a”.</p>
<div class="sourceCode" id="cb17"><pre class="downlit">
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">7</span>

<span class="fu"><a href="reference/let.html">let</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>VAR <span class="op">=</span> <span class="st">'a'</span><span class="op">)</span>,
  
  <span class="va">VAR</span> <span class="op">+</span> <span class="va">VAR</span>
<span class="op">)</span>
 <span class="co">#  [1] 14</span></pre></div>
<p>This is useful in re-adapting non-standard evaluation interfaces (NSE interfaces) so one can script or program over them.</p>
<p>We are trying to make <code><a href="reference/let.html">let()</a></code> self teaching and self documenting (to the extent that makes sense). For example try the arguments “<code>eval=FALSE</code>” prevent execution and see what <em>would</em> have been executed, or <code>debug=TRUE</code> to have the replaced code printed in addition to being executed:</p>
<div class="sourceCode" id="cb18"><pre class="downlit">
<span class="fu"><a href="reference/let.html">let</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>VAR <span class="op">=</span> <span class="st">'a'</span><span class="op">)</span>,
  eval <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="op">{</span>
    <span class="va">VAR</span> <span class="op">+</span> <span class="va">VAR</span>
  <span class="op">}</span>
<span class="op">)</span>
 <span class="co">#  {</span>
 <span class="co">#      a + a</span>
 <span class="co">#  }</span>

<span class="fu"><a href="reference/let.html">let</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>VAR <span class="op">=</span> <span class="st">'a'</span><span class="op">)</span>,
  debugPrint <span class="op">=</span> <span class="cn">TRUE</span>,
  <span class="op">{</span>
    <span class="va">VAR</span> <span class="op">+</span> <span class="va">VAR</span>
  <span class="op">}</span>
<span class="op">)</span>
 <span class="co">#  $VAR</span>
 <span class="co">#  [1] "a"</span>
 <span class="co">#  </span>
 <span class="co">#  {</span>
 <span class="co">#      a + a</span>
 <span class="co">#  }</span>
 <span class="co">#  [1] 14</span></pre></div>
<p>Please see <code><a href="articles/let.html">vignette('let', package='wrapr')</a></code> for more examples. Some formal documentation can be found <a href="https://github.com/WinVector/wrapr/blob/master/extras/wrapr_let.pdf">here</a>. <code><a href="reference/let.html">wrapr::let()</a></code> was inspired by <code><a href="https://rdrr.io/pkg/gtools/man/defmacro.html">gtools::strmacro()</a></code> and <code><a href="https://rdrr.io/r/base/bquote.html">base::bquote()</a></code>, please see <a href="https://github.com/WinVector/wrapr/blob/master/extras/bquote.md">here</a> for some notes on macro methods in <code>R</code>.</p>
</div>
<div id="evalbsi-evaluate-with-bquote--string-interpolation" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#evalbsi-evaluate-with-bquote--string-interpolation" class="anchor"></a><a href="https://winvector.github.io/wrapr/articles/bquote.html"><code>evalb()</code>/<code>si()</code></a> (evaluate with <code>bquote</code> / string interpolation)</h1></div>
<p><code>wrapr</code> supplies unified notation for quasi-quotation and string interpolation.</p>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="va">angle</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>
<span class="va">variable</span> <span class="op">&lt;-</span> <span class="st">"angle"</span>

<span class="co"># execute code</span>
<span class="fu"><a href="reference/evalb.html">evalb</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="op">-</span><span class="va">variable</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html">sin</a></span><span class="op">(</span><span class="fu">.</span><span class="op">(</span><span class="op">-</span><span class="va">variable</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span></pre></div>
<p><img src="tools/README-unnamed-chunk-3-1.png"><!-- --></p>
<div class="sourceCode" id="cb20"><pre class="downlit">

<span class="co"># alter string</span>
<span class="fu"><a href="reference/si.html">si</a></span><span class="op">(</span><span class="st">"plot(x = .(variable), y = .(variable))"</span><span class="op">)</span>
 <span class="co">#  [1] "plot(x = \"angle\", y = \"angle\")"</span></pre></div>
<p>The extra <code>.(-x)</code> form is a shortcut for <code>.(as.name(x))</code>.</p>
</div>
<div id="sortv-sort-a-dataframe-by-a-set-of-columns" class="section level1">
<h1 class="hasAnchor">
<a href="#sortv-sort-a-dataframe-by-a-set-of-columns" class="anchor"></a><a href="https://winvector.github.io/wrapr/reference/sortv.html"><code>sortv()</code></a> (sort a data.frame by a set of columns)</h1>
<p>This is the sort command that is missing from <code>R</code>: sort a <code>data.frame</code> by a chosen set of columns specified in a variable.</p>
<div class="sourceCode" id="cb21"><pre class="downlit">
<span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, 
  y <span class="op">=</span> <span class="fl">6</span><span class="op">:</span><span class="fl">1</span>,
  z <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>
<span class="va">order_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'x'</span>, <span class="st">'y'</span><span class="op">)</span>

<span class="fu"><a href="reference/sortv.html">sortv</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">order_cols</span><span class="op">)</span>
 <span class="co">#    x y z</span>
 <span class="co">#  6 1 1 6</span>
 <span class="co">#  5 1 2 5</span>
 <span class="co">#  2 2 5 2</span>
 <span class="co">#  1 2 6 1</span>
 <span class="co">#  4 3 3 4</span>
 <span class="co">#  3 3 4 3</span></pre></div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install with:</p>
<div class="sourceCode" id="cb22"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"wrapr"</span><span class="op">)</span></pre></div>
</div>
<div id="more-information" class="section level2">
<h2 class="hasAnchor">
<a href="#more-information" class="anchor"></a>More Information</h2>
<p>More details on <code>wrapr</code> capabilities can be found in the following two technical articles:</p>
<ul>
<li><a href="https://github.com/WinVector/wrapr/blob/master/extras/wrapr_let.pdf">let</a></li>
<li><a href="https://journal.r-project.org/archive/2018/RJ-2018-042/index.html">R Journal “Dot-Pipe: an S3 Extensible Pipe for R”"</a></li>
</ul>
</div>
<div id="note" class="section level2">
<h2 class="hasAnchor">
<a href="#note" class="anchor"></a>Note</h2>
<p>Note: <code>wrapr</code> is meant only for “tame names”, that is: variables and column names that are also valid <em>simple</em> (without quotes) <code>R</code> variables names.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=wrapr">https://​cloud.r-project.org/​package=wrapr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/WinVector/wrapr/">https://​github.com/​WinVector/​wrapr/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/WinVector/wrapr/issues">https://​github.com/​WinVector/​wrapr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>John Mount <br><small class="roles"> Author, maintainer </small>  </li>
<li>Nina Zumel <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=wrapr"><img src="https://www.r-pkg.org/badges/version/wrapr" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://CRAN.R-project.org/package=wrapr"><img src="https://tinyverse.netlify.com/badge/wrapr" alt="status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by John Mount, Nina Zumel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
